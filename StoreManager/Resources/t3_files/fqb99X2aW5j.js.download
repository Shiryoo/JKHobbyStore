;/*FB_PKG_DELIM*/

__d("MAWShadowTestMediaStorage",["MAWSendQplToServer","Random","WABlobToArrayBuffer","WAMediaWasmWorkerClient","WATagsLogger","gkx","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["runMediaStorageShadowTestWasmWorker for storage: "," failed: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["runMediaStorageShadowTestWasmWorker succeeded"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["runMediaStorageShadowTesting started"]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["MediaStorageShadowTest"]),l=["idb","webcache","opfs"],m=9e4;async function a(a){var b=d("Random").random()<n()/100;if(!b)return;var e=a.file,f=await d("WABlobToArrayBuffer").blobToArrayBuffer(e);k.LOG(j());b=function(a){var b=d("Random").uint32(),g=d("MAWSendQplToServer").startQplUserFlow(c("qpl")._(521472095,"2859"),{int:{input_file_size:e.size},string:{storage_type:a}},b,m);return d("WAMediaWasmWorkerClient").runMediaStorageShadowTestWasmWorker(f,a,g).then(function(){k.LOG(i()),g.endSuccess()}).catch(function(b){k.ERROR(h(),a,b),g.endFail("runtime-error",b)})};for(a of l)await b(a)}function n(){return c("gkx")("2067")?100:c("justknobx")._("4271")}g.runMediaStorageShadowTesting=a}),98);